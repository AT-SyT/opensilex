<template>
    <b-modal ref="modalRef" @ok.prevent="validate" size="lg" :static="true">
    <template v-slot:modal-ok>{{$t('component.common.ok')}}</template>
    <template v-slot:modal-cancel>{{$t('component.common.cancel')}}</template>

    <template v-slot:modal-title>{{title}}</template>
    <ValidationObserver ref="validatorRef">

        <b-form>

        <!-- URI -->
        <b-form-group >
            <opensilex-FormInputLabelHelper label=component.variable.method-uri helpMessage="component.variable.method-uri-help"  ></opensilex-FormInputLabelHelper>
          <ValidationProvider vid="autogenerated">
            <b-form-checkbox v-if="!editMode" id="autogenerated" v-model="uriGenerated"  name="autogenerated"
            >{{$t('component.common.autogenerated-uri')}}
            </b-form-checkbox>
          </ValidationProvider>
          <ValidationProvider name="uri" rules="required_if:autogenerated,false|url" v-slot="{ errors }">
            <b-form-input
              id="uri"  v-model="form.uri" :disabled="uriGenerated"  type="text"  required :placeholder="$t('component.common.autogenerated-uri')"
            ></b-form-input>
            <div class="error-message alert alert-danger">{{ errors[0] }}</div>
          </ValidationProvider>
        </b-form-group>

        <!-- Name -->
        <b-form-group  required  >
            <opensilex-FormInputLabelHelper label=component.variable.method-name helpMessage="component.variable.method-name-help" >
            </opensilex-FormInputLabelHelper>
            <ValidationProvider :name="$t('component.variable.method-name')" v-slot="{ errors }">                
            <b-form-input  id="label"  v-model="form.label"  type="textinput"
                :placeholder="$t('component.variable.method-name-placeholder')" >
            </b-form-input>
            <div class="error-message alert alert-danger">{{ errors[0] }}</div>
            </ValidationProvider>
        </b-form-group>

        <b-form-group  required  >
            <opensilex-FormInputLabelHelper label=component.variable.method-description helpMessage="component.variable.method-description-help" >
            </opensilex-FormInputLabelHelper>
            <ValidationProvider :name="$t('component.variable.method-description')" v-slot="{ errors }">                
            <b-textarea  id="description"  v-model="form.description"  type="textarea"
                :placeholder="$t('component.variable.method-description-placeholder')" >
            </b-textarea>
            <div class="error-message alert alert-danger">{{ errors[0] }}</div>
            </ValidationProvider>
        </b-form-group>
          
        </b-form>
    </ValidationObserver>
    </b-modal>
</template>



<script lang="ts">
import { Component, Prop, Ref } from "vue-property-decorator";
import Vue from "vue";

@Component
export default class Method extends Vue {

    title = "";
    uriGenerated = true;
    editMode = false;

    form: any = {
        uri: null,
        name: null,
        description: null
    }

    showCreateForm() {
        this.title = this.$t("component.variable.form.add.method").toString();
        let modalRef: any = this.$refs.modalRef;
        modalRef.show();
    }
}

</script>

<style scoped lang="scss">
</style>